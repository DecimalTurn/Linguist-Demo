#################################################################################
# TODO:
#################################################################################
# Try to run in Docker?: https://github.com/github-linguist/linguist#docker
# Use the cache to load gem faster: https://docs.knapsackpro.com/2021/how-to-load-ruby-gems-from-cache-on-github-actions
  # Seems like the tutorial above is for installing dependencies to an actual ruby project. What we want it to save the installed gem with its dependencies as a whole
  # Let's look at : https://stackoverflow.com/questions/3408868/where-do-gems-install

name: Run Linguist

on: workflow_dispatch

env:
  REPO: PuzzleTakX/PuzzleTak_AudioPlayer  # Define the repository here
  OPTIONS: '--breakdown'       # Define the options for Linguist here

jobs:
  run-linguist:
    name: Run Linguist
    runs-on: ubuntu-latest
    steps:
        
      - name: Install Linguist
        run: |
          sudo gem install github-linguist
          sudo gem env
        shell: bash    

      - name: Checkout Repo
        uses: actions/checkout@v4
        with:
          repository: ${{ env.REPO }}

      - name: Run Linguist
        run: |
          echo ${{ env.REPO }}
          github-linguist ${{ env.OPTIONS }}
        shell: bash


    # - name: Checkout Linguist
    #   uses: actions/checkout@v4
    #   with:
    #     name: '${{ inputs.repo }}'
    #     ref: refs/heads/release
    # - name: Test Linguist
    #   run: |
    #     cd github-linguist
    #     bundle exec rake test
    #     cd ..
    #   shell: bash
